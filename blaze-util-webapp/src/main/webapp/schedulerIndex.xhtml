<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <f:view>
        <f:metadata>
            <f:event type="preRenderView" listener="#{schedulerBean.preRender}"/>
        </f:metadata>
        <h:head>
            <title>Scheduler Übersicht</title>
        </h:head>
        <h:body>
            <h:form id="form">
                <h:messages/>
                <h:panelGroup id="schedulerForm">
                    <ul>
                        <li>
                            <h:outputLabel for="schedulerName" value="Scheduler Name"/>
                            <h:inputText id="schedulerName" value="#{schedulerBean.scheduler.schedulerName}"/>
                            <h:message for="schedulerName"/>
                        </li>
                        <li>
                            <h:outputLabel for="schedulerInstanceId" value="Scheduler Instanz-Id"/>
                            <h:inputText id="schedulerInstanceId" value="#{schedulerBean.scheduler.schedulerInstanceId}"/>
                            <h:message for="schedulerInstanceId"/>
                        </li>
                        <li>
                            <h:outputLabel for="schedulerRmiHost" value="RMI-Host"/>
                            <h:inputText id="schedulerRmiHost" value="#{schedulerBean.scheduler.rmiHost}" required="true"/>
                            <h:message for="schedulerRmiHost"/>
                        </li>
                        <li>
                            <h:outputLabel for="schedulerRmiPort" value="RMI-Port"/>
                            <h:inputText id="schedulerRmiPort" value="#{schedulerBean.scheduler.rmiPort}" required="true"/>
                            <h:message for="schedulerRmiPort"/>
                        </li>
                    </ul>
                    <h:commandButton value="Speichern" action="#{schedulerBean.saveScheduler}">
                        <f:ajax render=":form" execute=":form:schedulerForm"/>
                    </h:commandButton>
                </h:panelGroup>
                <h:dataTable value="#{schedulerBean.schedulers}" var="scheduler">
                    <h:column>
                        <f:facet name="header">
                            Scheduler-Name
                        </f:facet>
                        <h:outputText value="#{scheduler.schedulerName}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Scheduler-Id
                        </f:facet>
                        <h:outputText value="#{scheduler.schedulerInstanceId}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            RMI-Host
                        </f:facet>
                        <h:outputText value="#{scheduler.rmiHost}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            RMI-Port
                        </f:facet>
                        <h:outputText value="#{scheduler.rmiPort}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Status
                        </f:facet>
                        <h:outputText value="#{schedulerBean.getSchedulerStatus(scheduler)}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Aktionen
                        </f:facet>
                        <h:commandButton value="Start" action="#{schedulerBean.startScheduler(scheduler)}" disabled="#{schedulerBean.getSchedulerStatus(scheduler) eq 'Started'}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>
                        <h:commandButton value="Shutdown" action="#{schedulerBean.shutdownScheduler(scheduler)}" disabled="#{schedulerBean.getSchedulerStatus(scheduler) eq 'Shutdown'}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>
                        <h:commandButton value="Standby" action="#{schedulerBean.standbyScheduler(scheduler)}" disabled="#{schedulerBean.getSchedulerStatus(scheduler) eq 'Standby'}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>

                        <h:commandButton value="Pause All" action="#{schedulerBean.pauseScheduler(scheduler)}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>
                        <h:commandButton value="Resume All" action="#{schedulerBean.resumeScheduler(scheduler)}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>
                        <h:commandButton value="Löschen" action="#{schedulerBean.deleteScheduler(scheduler)}" immediate="true">
                            <f:ajax render=":form"/>
                        </h:commandButton>

                        <h:link value="Jobs bearbeiten" outcome="jobIndex.xhtml" disabled="#{scheduler.scheduler eq null}">
                            <f:param name="schedulerName" value="#{scheduler.scheduler.schedulerName}"/>
                        </h:link>
                    </h:column>

                </h:dataTable>
            </h:form>
        </h:body>
    </f:view>
</html>
